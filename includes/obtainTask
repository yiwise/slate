<h1 id='b8663b3278'>任务信息查询接口</h1><h2 id='63369839c4'>获取任务列表接口</h2><h3 id='7d73d51a26'>功能说明：</h3>
<p>通过此接口可以获取指定公司的任务列表</p>

<blockquote>
<p>JSON响应实例：</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "code": 200,
  "data": {
    "number": 1,
    "pageSize": 20,
    "totalElements": 1,
    "pages": 1,
    "content": [{
      "robotCallJobId": 1,
      "name": "dialog测试",
      "status": "TERMINATE",
      "completedTask": 2157,
      "taskCallTotal": 166,
      "createTime": "2018-09-26 18:07",
      "createdByUserName": null,
      "organizationName": null
    }]
  },
  "requestId": "OTMAGZFW",
  "resultMsg": "创建成功",
  "errorStackTrace": null
}
</code></pre><h3 id='c7811523ac'>请求：</h3>
<p>URL：https://openapi.tanyibot.com/apiOpen/v1/job/getJobs</p>
<h3 id='261d12e31d'>请求方法：</h3>
<p>GET</p>
<h3 id='2eb6f47757'>请求参数:</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>是否必须</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>否</td>
<td>任务名称</td>
<td>测试</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>否</td>
<td>任务状态,(NOT_STARTED, &quot;未开始&quot;),(IN_PROCESS, &quot;进行中&quot;),(COMPLETED, &quot;已完成&quot;),(RUNNABLE, &quot;可运行&quot;),(USER_PAUSE, &quot;用户暂停&quot;),(SYSTEM_SUSPENDED, &quot;系统暂停&quot;),(TERMINATE, &quot;已终止&quot;),(IN_QUEUE, &quot;排队中&quot;);</td>
<td>1</td>
</tr>
<tr>
<td>pageNum</td>
<td>Integer</td>
<td>否</td>
<td>第几页,默认1</td>
<td>1</td>
</tr>
<tr>
<td>pageSize</td>
<td>Integer</td>
<td>否</td>
<td>页面大小,选填,默认20,最大值100</td>
<td>10</td>
</tr>
</tbody></table>
<h3 id='d981aa6fd7'>响应：</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>integer</td>
<td>响应码</td>
</tr>
<tr>
<td>number</td>
<td>Integer</td>
<td>第几页</td>
</tr>
<tr>
<td>pageSize</td>
<td>Integer</td>
<td>每页页面条数</td>
</tr>
<tr>
<td>totalElements</td>
<td>Integer</td>
<td>数据总条数</td>
</tr>
<tr>
<td>pages</td>
<td>Integer</td>
<td>页面总数</td>
</tr>
<tr>
<td>robotCallJobId</td>
<td>Long</td>
<td>任务id</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>任务名称</td>
</tr>
<tr>
<td>completedTask</td>
<td>Integer</td>
<td>完成的任务</td>
</tr>
<tr>
<td>taskCallTotal</td>
<td>Integer</td>
<td>任务总数</td>
</tr>
<tr>
<td>createTime</td>
<td>String</td>
<td>创建时间</td>
</tr>
<tr>
<td>createdByUserName</td>
<td>String</td>
<td>创建人</td>
</tr>
<tr>
<td>organizationName</td>
<td>String</td>
<td>组织</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>任务状态, NOT_STARTED(0, &quot;未开始&quot;),IN_PROCESS(1, &quot;进行中&quot;),COMPLETED(2, &quot;已完成&quot;),RUNNABLE(3, &quot;可运行&quot;),USER_PAUSE(4, &quot;用户暂停&quot;),SYSTEM_SUSPENDED(5, &quot;系统暂停&quot;),TERMINATE(6, &quot;已终止&quot;),IN_QUEUE(7, &quot;排队中&quot;);</td>
</tr>
<tr>
<td>requestId</td>
<td>String</td>
<td>请求Id</td>
</tr>
<tr>
<td>resultMsg</td>
<td>String</td>
<td>响应说明</td>
</tr>
</tbody></table>
<h2 id='4b97fb63c0'>获取任务详情接口</h2><h3 id='7d73d51a26-2'>功能说明：</h3>
<p>通过此接口可以获取指定任务的详细信息</p>

<blockquote>
<p>JSON响应实例：</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "code": 200,
    "data": {
        "robotCallJob": {
            "robotCallJobId": 1,
            "tenantId": 1,
            "dialogFlowId": 1,
          "dialogFlowName":"金融行业体验demo-优化版",
            "name": "dialog测试",
            "mode": "MANUAL",
            "robotCount": 12,
            "smsTemplateId": null,
            "phoneType": "LANDLINE",
            "dailyStartTime": "15:08:31",
            "dailyEndTime": "15:08:36",
            "inactiveTimeList": [{"startTime":"12:00", "endTime":"13:00"}],
            "description": null,
            "wechatAlertLevel": [],
            "wechatAlertLevelCode":[],
            "smsAlertLevel": [],
            "smsAlertLevelCode":[],
            "wechatConditionAlertLevel":[],
            "wechatConditionAlertLevelCode":[],
            "alertUsers": [],
            "wechatSendMethod": "SENDTOALL",
            "status": "TERMINATE",
            "startTime": null,
            "nextStartTime": "00:00:00",
            "createTime": "2018-10-09 15:08:54",
            "updateTime": "2018-10-09 15:11:20",
            "earlyWarningAlertUsers": []
        },
    "jobPhoneNumberList": [{
        "tenantPhoneNumberId": 675,
        "phoneNumber": "13576084683",
        "phoneName": "",
        "enabledStatus": 1,
        "phoneType": "LANDLINE",
        "concurrencyQuota": 5
      }],
    "transferPhoneNumber": [
        "1523654789",
        "1758426896"
    ],
        "completedTask": 3612,
        "taskCallTotal": 166
    },
    "requestId": "VJDMUZIC",
    "resultMsg": "获取成功",
    "errorStackTrace": null
}

</code></pre><h3 id='c7811523ac-2'>请求：</h3>
<p>URL：https://openapi.tanyibot.com/apiOpen/v1/job/getJobDetail</p>
<h3 id='261d12e31d-2'>请求方法：</h3>
<p>GET</p>
<h3 id='2eb6f47757-2'>请求参数:</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>是否必须</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead><tbody>
<tr>
<td>robotCallJobId</td>
<td>Long</td>
<td>是</td>
<td>任务Id</td>
<td>21</td>
</tr>
</tbody></table>
<h3 id='d981aa6fd7-2'>响应：</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>integer</td>
<td>响应码</td>
</tr>
<tr>
<td>robotCallJobId</td>
<td>Long</td>
<td>任务id</td>
</tr>
<tr>
<td>dialogFlowId</td>
<td>Long</td>
<td>话术id</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>任务名称</td>
</tr>
<tr>
<td>mode</td>
<td>String</td>
<td>任务类型 (AUTO, &quot;自动任务&quot;),(MANUAL, &quot;手动任务&quot;)</td>
</tr>
<tr>
<td>phoneType</td>
<td>String</td>
<td>电话类型 (MOBILE, &quot;手机&quot;),(LANDLINE, &quot;固话&quot;),(UNFIXED_CALL, &quot;无主叫固话&quot;)</td>
</tr>
<tr>
<td>robotCount</td>
<td>Integer</td>
<td>任务拨打的号码总数</td>
</tr>
<tr>
<td>smsTemplateId</td>
<td>Long</td>
<td>短信模版id</td>
</tr>
<tr>
<td>dailyStartTime</td>
<td>String</td>
<td>可拨打开始时间</td>
</tr>
<tr>
<td>dailyEndTime</td>
<td>String</td>
<td>可拨打结束时间</td>
</tr>
<tr>
<td>inactiveTimeList</td>
<td>List</td>
<td>不可拨打时间段列表</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>任务注释</td>
</tr>
<tr>
<td>wechatAlertLevel</td>
<td>String</td>
<td>微信提示等级</td>
</tr>
<tr>
<td>wechatAlertLevelCode</td>
<td>Integer</td>
<td>微信提示等级code</td>
</tr>
<tr>
<td>smsAlertLevel</td>
<td>String</td>
<td>短信提示等级</td>
</tr>
<tr>
<td>smsAlertLevelCode</td>
<td>Integer</td>
<td>短信提示登记code</td>
</tr>
<tr>
<td>wechatConditionAlertLevel</td>
<td>String</td>
<td>微信条件提示等级</td>
</tr>
<tr>
<td>wechatConditionAlertLevelCode</td>
<td>Integer</td>
<td>微信条件提示等级Code</td>
</tr>
<tr>
<td>alertUsers</td>
<td>String</td>
<td>提示人员</td>
</tr>
<tr>
<td>earlyWarningAlertUsers</td>
<td>String</td>
<td>预警提示人员</td>
</tr>
<tr>
<td>createTime</td>
<td>String</td>
<td>任务创建时间</td>
</tr>
<tr>
<td>updateTime</td>
<td>String</td>
<td>任务修改时间</td>
</tr>
<tr>
<td>startTime</td>
<td>String</td>
<td>任务开始时间</td>
</tr>
<tr>
<td>nextStartTime</td>
<td>String</td>
<td>下一次任务开始时间</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>任务状态, NOT_STARTED(0, &quot;未开始&quot;),IN_PROCESS(1, &quot;进行中&quot;),COMPLETED(2, &quot;已完成&quot;),RUNNABLE(3, &quot;可运行&quot;),USER_PAUSE(4, &quot;用户暂停&quot;),SYSTEM_SUSPENDED(5, &quot;系统暂停&quot;),TERMINATE(6, &quot;已终止&quot;),IN_QUEUE(7, &quot;排队中&quot;)</td>
</tr>
<tr>
<td>jobPhoneNumberList</td>
<td>List</td>
<td>任务拨打的电话列表</td>
</tr>
<tr>
<td>transferPhoneNumber</td>
<td>List</td>
<td>转人工号码</td>
</tr>
<tr>
<td>dialogFlowName</td>
<td>String</td>
<td>话术名称</td>
</tr>
<tr>
<td>requestId</td>
<td>String</td>
<td>请求Id</td>
</tr>
<tr>
<td>resultMsg</td>
<td>String</td>
<td>响应说明</td>
</tr>
</tbody></table>
<h2 id='7ed6838292'>获取任务统计接口</h2><h3 id='7d73d51a26-3'>功能说明：</h3>
<p>通过此接口可以获取指定任务的统计详细信息</p>

<blockquote>
<p>JSON响应实例：</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "code": 200,
    "data": {
            "taskProgress": 2175.9,
            "answeredRate": 9.47,
            "intentLevel": {
                "A": 568,
                "B": 555,
                "C": 606,
                "D": 598,
                "E": 560,
                "F": 569
            },
            "taskCallTotal": 3612,
            "answeredTask": 342,
            "chatDurationTotal": 89659,
            "completedTask": 0,
            "customerConcern": ["安全", "地理位置", "健身", "价格", "交通"],
            "dialResult": {
                "ANSWERED": 342,
                "NO_ANSWER": 348,
                "BUSY": 353,
                "POWER_OFF": 344,
                "OUT_OF_SERVICE": 341,
                "REFUSED": 366,
                "VACANT_NUMBER": 338,
                "CAN_NOT_CONNECT": 334,
                "FROM_PHONE_ERROR": 346,
                "SYSTEM_ERROR": 344
            },
            "chatRound": {
                "LESS_3": 9,
                "F3_T6": 1,
                "F6_T10": 4,
                "F10_MORE": 336
            },
            "chatDuration": {
                "LESS_10S": 14,
                "F10S_T1MIN": 28,
                "F1MIN_T2MIN": 35,
                "F2MIN_T3MIN": 43,
                "F3MIN_TMORE": 230
            },
            "callJobStatsBrokenLine": {
                "taskCallCompletedList": [{
                    "date": "2018-09-27",
                    "val": 1000
                }, {
                    "date": "2018-10-09",
                    "val": 1455
                }],
                "answeredTaskList": [{
                    "date": "2018-09-27",
                    "val": 119
                }, {
                    "date": "2018-10-09",
                    "val": 134
                }],
                "answeredTaskRateList": [{
                    "date": "2018-09-27",
                    "val": 11.90
                }, {
                    "date": "2018-10-09",
                    "val": 9.21
                }],
                "chatDurationTotalList": [{
                    "date": "2018-09-25",
                    "val": 22547
                }, {
                    "date": "2018-09-27",
                    "val": 31218
                }, {
                    "date": "2018-10-09",
                    "val": 35894
                }],
                "averageDurationList": [{
                    "date": "2018-09-27",
                    "val": 26233
                }, {
                    "date": "2018-10-09",
                    "val": 26786
                }],
                "intentLevelTagDetailList":[
          {
              "code":0,
              "intentLevelTagDetailId":825,
              "intentLevelTagId":121,
              "name":"较差"
          },
          {
              "code":1,
              "intentLevelTagDetailId":826,
              "intentLevelTagId":121,
              "name":"一般"
          },
          {
              "code":2,
              "intentLevelTagDetailId":827,
              "intentLevelTagId":121,
              "name":"好"
          },
          {
              "code":3,
              "intentLevelTagDetailId":828,
              "intentLevelTagId":121,
              "name":"很好"
          }]
            }
    },
    "requestId": "VJDMUZIC",
    "resultMsg": "获取成功",
    "errorStackTrace": null
}

</code></pre><h3 id='c7811523ac-3'>请求：</h3>
<p>URL：https://openapi.tanyibot.com/apiOpen/v1/job/getJobStats</p>
<h3 id='261d12e31d-3'>请求方法：</h3>
<p>GET</p>
<h3 id='2eb6f47757-3'>请求参数:</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>是否必须</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead><tbody>
<tr>
<td>robotCallJobId</td>
<td>Long</td>
<td>是</td>
<td>任务Id</td>
<td>21</td>
</tr>
</tbody></table>
<h3 id='d981aa6fd7-3'>响应：</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>响应码</td>
</tr>
<tr>
<td>taskProgress</td>
<td>Double</td>
<td>任务进度</td>
</tr>
<tr>
<td>answeredRate</td>
<td>Double</td>
<td>接听率</td>
</tr>
<tr>
<td>completedTask</td>
<td>Integer</td>
<td>完成总数</td>
</tr>
<tr>
<td>taskCallTotal</td>
<td>Integer</td>
<td>任务总数</td>
</tr>
<tr>
<td>answeredTask</td>
<td>Integer</td>
<td>接听数量</td>
</tr>
<tr>
<td>chatDurationTotal</td>
<td>Integer</td>
<td>总接听时间</td>
</tr>
<tr>
<td>intentLevel</td>
<td>Map</td>
<td>意向等级</td>
</tr>
<tr>
<td>customerConcern</td>
<td>Map</td>
<td>关注点</td>
</tr>
<tr>
<td>dialResult</td>
<td>Map</td>
<td>通话结果</td>
</tr>
<tr>
<td>chatRound</td>
<td>Map</td>
<td>通话轮次</td>
</tr>
<tr>
<td>chatDuration</td>
<td>Map</td>
<td>通话时间</td>
</tr>
<tr>
<td>taskCallCompletedList</td>
<td>List</td>
<td>任务完成</td>
</tr>
<tr>
<td>answeredTaskList</td>
<td>List</td>
<td>通话结果</td>
</tr>
<tr>
<td>answeredTaskRateList</td>
<td>List</td>
<td>通话比例</td>
</tr>
<tr>
<td>chatDurationTotalList</td>
<td>List</td>
<td>通话轮次</td>
</tr>
<tr>
<td>averageDurationList</td>
<td>List</td>
<td>平均通话时长</td>
</tr>
<tr>
<td>requestId</td>
<td>String</td>
<td>请求Id</td>
</tr>
<tr>
<td>resultMsg</td>
<td>String</td>
<td>响应说明</td>
</tr>
<tr>
<td>intentLevelTagDetailList</td>
<td>List</td>
<td>意向分类详情列表</td>
</tr>
<tr>
<td>code</td>
<td>Integer</td>
<td>意向分类详情编码</td>
</tr>
<tr>
<td>intentLevelTagDetailId</td>
<td>Long</td>
<td>意向分类详情id</td>
</tr>
<tr>
<td>intentLevelTagId</td>
<td>Long</td>
<td>意向分类id</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>意向分类详情名称</td>
</tr>
</tbody></table>
<h2 id='ce576131d5'>获取任务中的变量（包括话术变量和短信变量）</h2><h3 id='7d73d51a26-4'>功能说明：</h3>
<p>通过接口可以获取该任务中的自定义变量，包括话术变量、意向短信变量、挂机短信变量等</p>

<blockquote>
<p>JSON响应实例：</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "code": 200,
    "data": [
        "欠款金额",
        "最后还款日期"
    ],
    "requestId": "RKXNIQAF",
    "resultMsg": "获取自定义属性成功",
    "errorStackTrace": null
}

</code></pre><h3 id='c7811523ac-4'>请求：</h3>
<p>URL：https://openapi.tanyibot.com/apiOpen/v1/job/getJobProperties</p>
<h3 id='261d12e31d-4'>请求方法：</h3><h3 id='261d12e31d-5'>请求方法：</h3>
<p>GET</p>
<h3 id='2eb6f47757-4'>请求参数:</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>是否必须</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead><tbody>
<tr>
<td>robotCallJobId</td>
<td>Long</td>
<td>是</td>
<td>任务Id</td>
<td>21</td>
</tr>
</tbody></table>
<h3 id='d981aa6fd7-4'>响应：</h3>
<table><thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Integer</td>
<td>响应码</td>
</tr>
<tr>
<td>requestId</td>
<td>String</td>
<td>请求Id</td>
</tr>
<tr>
<td>resultMsg</td>
<td>String</td>
<td>响应说明</td>
</tr>
</tbody></table>
